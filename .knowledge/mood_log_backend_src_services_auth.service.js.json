{"is_source_file": true, "format": "JavaScript", "description": "This file defines authentication-related services for a backend application, including user creation, retrieval, password verification, and token signing.", "external_files": ["../db/pool.js", "../config/env.js"], "external_methods": ["getDb()", "bcrypt.hash()", "bcrypt.compare()", "jwt.sign()"], "published": ["createUser", "getUserByEmail", "verifyPassword", "signToken"], "classes": [], "methods": [{"name": "mapUser(row)", "description": "Maps a database user row to a simplified user object excluding sensitive data.", "scope": "", "scopeKind": ""}, {"name": "createUser({ name, email, password })", "description": "Creates a new user with hashed password and handles email duplication errors.", "scope": "", "scopeKind": ""}, {"name": "getUserByEmail(email)", "description": "Retrieves user information from the database based on email, including password hash.", "scope": "", "scopeKind": ""}, {"name": "verifyPassword(plain, hash)", "description": "Compares a plaintext password with a stored bcrypt hash.", "scope": "", "scopeKind": ""}, {"name": "signToken(user)", "description": "Generates a JWT token with user ID and email, using secret and expiration from environment variables.", "scope": "", "scopeKind": ""}], "calls": ["getDb()", "bcrypt.hash()", "client.query()", "bcrypt.compare()", "jwt.sign()"], "search-terms": ["auth.service.js", "createUser", "getUserByEmail", "verifyPassword", "signToken", "hash", "jwt", "user creation", "password hashing"], "state": 2, "file_id": 14, "knowledge_revision": 29, "git_revision": "", "ctags": [{"_type": "tag", "name": "createUser", "path": "/home/kavia/workspace/code-generation/mood-tracker-and-journal-284061-284072/mood_log_backend/src/services/auth.service.js", "pattern": "/^export async function createUser({ name, email, password }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ name, email, password })"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/mood-tracker-and-journal-284061-284072/mood_log_backend/src/services/auth.service.js", "pattern": "/^  const payload = { sub: user.id, email: user.email };$/", "language": "JavaScript", "kind": "property", "scope": "signToken.payload", "scopeKind": "class"}, {"_type": "tag", "name": "getUserByEmail", "path": "/home/kavia/workspace/code-generation/mood-tracker-and-journal-284061-284072/mood_log_backend/src/services/auth.service.js", "pattern": "/^export async function getUserByEmail(email) {$/", "language": "JavaScript", "kind": "function", "signature": "(email)"}, {"_type": "tag", "name": "mapUser", "path": "/home/kavia/workspace/code-generation/mood-tracker-and-journal-284061-284072/mood_log_backend/src/services/auth.service.js", "pattern": "/^function mapUser(row) {$/", "language": "JavaScript", "kind": "function", "signature": "(row)"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/mood-tracker-and-journal-284061-284072/mood_log_backend/src/services/auth.service.js", "pattern": "/^  const payload = { sub: user.id, email: user.email };$/", "language": "JavaScript", "kind": "class", "scope": "signToken", "scopeKind": "class"}, {"_type": "tag", "name": "signToken", "path": "/home/kavia/workspace/code-generation/mood-tracker-and-journal-284061-284072/mood_log_backend/src/services/auth.service.js", "pattern": "/^export function signToken(user) {$/", "language": "JavaScript", "kind": "function", "signature": "(user)"}, {"_type": "tag", "name": "sub", "path": "/home/kavia/workspace/code-generation/mood-tracker-and-journal-284061-284072/mood_log_backend/src/services/auth.service.js", "pattern": "/^  const payload = { sub: user.id, email: user.email };$/", "language": "JavaScript", "kind": "property", "scope": "signToken.payload", "scopeKind": "class"}, {"_type": "tag", "name": "verifyPassword", "path": "/home/kavia/workspace/code-generation/mood-tracker-and-journal-284061-284072/mood_log_backend/src/services/auth.service.js", "pattern": "/^export async function verifyPassword(plain, hash) {$/", "language": "JavaScript", "kind": "function", "signature": "(plain, hash)"}], "hash": "4b31a4ba6bd7b1ebbc94f81025eacfc8", "format-version": 4, "code-base-name": "mood_log_backend", "filename": "mood_log_backend/src/services/auth.service.js", "fields": [{"name": "const payload = { sub: user.id, email: user.email };", "scope": "signToken.payload", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"29": ""}]}